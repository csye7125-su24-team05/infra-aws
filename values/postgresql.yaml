global:
  postgresql:
    username: ""
    password: ""
    database: ""
    repmgrUsername: ""
    repmgrPassword: ""
    repmgrDatabase: "repmgr"
    existingSecret: ""
  pgpool:
    adminUsername: ""
    adminPassword: ""
    existingSecret: ""
postgresql:
  replicaCount: 2
  syncReplication: true
  networkPolicy:
    enabled: true
    allowExternal: false
    allowExternalEgress: false
    extraIngress:
      - ports:
        - port: 9187
          protocol: TCP
        from: []
  # extendedConf:
  #   log_destination: 'stderr'
  #   logging_collector: 'on'
  #   log_directory: 'pg_log'
  #   log_filename: 'postgresql.log'
  #   log_format: 'json'
  #   log_statement: 'all'
  #   log_timezone: 'UTC'
pgpool:
  networkPolicy:
    enabled: true
    allowExternal: false
    allowExternalEgress: false
    extraIngress:
      - ports:
        - port: 5432
          protocol: TCP
        from:
        - podSelector: 
            matchLabels:
              app.kubernetes.io/component: cve-consumer
    extraEgress:
      - ports:
        - port: 5432
          protocol: TCP
        to:
        - podSelector:
            matchLabels:
              app.kubernetes.io/component: cve-consumer
      - ports:
        - port: 15012
          protocol: TCP
        - port: 15017
          protocol: TCP
        to:
        - namespaceSelector:
            matchLabels:
              name: istio-system
persistence:
  size: 2Gi

commonLabels:
  app: postgresql-cve

metrics:
  enabled: true